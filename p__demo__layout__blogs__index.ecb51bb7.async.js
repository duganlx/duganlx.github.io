(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[967],{9229:function(e,t,n){"use strict";var i=n(97857),a=n.n(i),o=n(13769),r=n.n(o),l=n(24556),c=n(20640),s=n.n(c),d=n(97956),u=n(42481),p=n(35182),h=n(74707),f=n(93416),x=n(44989),g=n(30399),m=n(15867),b=n(2453),v=(n(81897),n(85893)),w=["inline","className","children"];t.Z=function(e){var t=e.content,n=e.layoutCfg,i=n.height,o=n.width,c=(0,l.l)((function(){return{height:"".concat(i,"px"),width:"".concat(o,"px"),fontSize:"16px",h1:{fontSize:"28px","&:before":{content:'" "',display:"inline-block",height:"32px",width:"5px",marginRight:"5px",backgroundColor:"#0050b3",verticalAlign:"text-bottom"}},h2:{fontSize:"24px"},h3:{fontSize:"20px"},"h4,h5,h6":{textDecoration:"line-through"},p:{marginBottom:"8px"},blockquote:{color:"#999",borderLeft:"3px solid #dfe2e5",padding:"3px 0 1px 10px"},ul:{listStyle:"disc"},ol:{listStyle:"decimal"},"ul.contains-task-list":{listStyle:"none",paddingInlineStart:"30px"},table:{margin:"10px 0",tr:{"td,th":{border:"1px solid rgb(34, 17, 71)",padding:"5px 10px",textAlign:"center"}}},".katex-mathml":{display:"none"}}})),j=(0,l.l)((function(){return{padding:"10px",backgroundColor:"#fff",position:"relative",width:"".concat(o-10,"px"),"&:hover":{button:{display:"block"}},button:{position:"absolute",top:"10px",right:"30px",backgroundColor:"#bfbfbf",display:"none"}}}));return(0,v.jsx)(d.D,{remarkPlugins:[x.Z,g.Z,f.Z],rehypePlugins:[h.Z],className:c,components:{code:function(e){var t=e.inline,n=e.className,i=e.children,o=r()(e,w),l=/language-(\w+)/.exec(n||"");return!t&&l?(0,v.jsxs)("div",{className:j,children:[(0,v.jsx)(u.Z,a()(a()({},o),{},{style:p.Z,language:l[1],PreTag:"div",wrapLines:!0,showLineNumbers:!1,children:String(i).replace(/\n$/,"")})),(0,v.jsx)(m.ZP,{type:"primary",size:"small",onClick:function(){s()(String(i).replace(/\n$/,""))?b.ZP.success("复制成功"):b.ZP.error("复制失败")},children:"copy"})]}):(0,v.jsx)("code",a()(a()({},o),{},{className:n,children:i}))}},children:t})}},89508:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return M}});var i=n(5574),a=n.n(i),o=n(19632),r=n.n(o),l=n(24556),c=n(80854),s=n(2453),d=n(27484),u=n.n(d),p=n(66607),h=n.n(p),f=n(96486),x=n(52297),g=n(67294),m=n(9229),b=n(75081),v=n(85893),w={height:100,width:100},j=function(e){var t=e.loadingcontent,n=e.content,i=e.navstate,o=e.contentlayout,r=void 0===o?w:o,c=e.navpartWidth,s=(0,g.useState)(w),d=a()(s,2),u=d[0],p=d[1],h=(0,g.useState)(w),f=a()(h,2),x=f[0],j=f[1],y=(0,g.useRef)(null);(0,g.useEffect)((function(){p({width:r.width-50,height:r.height-20}),j({width:r.width-c-50,height:r.height-20})}),[i,r]);var k=(0,l.l)((function(){return{width:"100%",height:"100%",".loading":{width:"100%",height:"100%",display:t?"flex":"none",justifyContent:"center",alignItems:"center"},".content":{height:"100%",width:"100%",overflowY:"auto",display:t?"none":"","::-webkit-scrollbar":{backgroundColor:"white",width:"5px"},"::-webkit-scrollbar-thumb":{borderRadius:"5px",backgroundColor:"#d9d9d9"}}}}));return console.log("s",x,"b",u),(0,v.jsxs)("div",{className:k,ref:y,children:[(0,v.jsx)("div",{className:"loading",children:(0,v.jsx)(b.Z,{})}),(0,v.jsx)("div",{className:"content",children:t?null:(0,v.jsx)(m.Z,{content:n,layoutCfg:i?u:x})})]})},y=n(66309),k=n(32983),S=function(e){var t=e.item,n=t.title,i=t.tags,a=t.createTime,o=(0,c.useModel)("demo.layout.blogs.model",(function(e){return{accatalog:e.accatalog,setAccatalog:e.udAccatalog}})),r=o.accatalog,s=o.setAccatalog,d=(0,l.l)((function(){return{borderBottom:"1px solid #d9d9d9",padding:"5px 2px 1px 5px",cursor:"pointer",backgroundColor:r&&r.id===t.id?"#f9f0ff":"white","&:hover":{backgroundColor:"#fafafa"},".acard-title":{color:"black",marginBottom:"5px",fontSize:"15px",wordSpacing:"1px"},".acard-info":{display:"flex",flexDirection:"row",width:"100%",justifyContent:"space-between",paddingBottom:"2px",alignItems:"center",".acardinfo-tags":{".ant-tag ":{height:"18px",lineHeight:"14px"}},".acardinfo-time":{lineHeight:"14px",fontSize:"13px",minWidth:"70px",color:"#8c8c8c"}}}}));return(0,v.jsxs)("div",{className:d,onClick:function(){s(t)},children:[(0,v.jsx)("div",{className:"acard-title",children:n}),(0,v.jsxs)("div",{className:"acard-info",children:[(0,v.jsx)("div",{className:"acardinfo-tags",children:i.map((function(e){return(0,v.jsx)(y.Z,{color:"orange",children:e},e)}))}),(0,v.jsx)("div",{className:"acardinfo-time",children:a})]})]})},C=function(e){var t=e.blogItems,n=e.loading,i=(0,l.l)((function(){return{border:"2px dashed #ffccc7",borderRadius:"5px",padding:"5px 3px 2px 3px",position:"relative",display:"flex",height:"calc(100% - 95px)",flexDirection:"column",justifyContent:"space-between",".title":{position:"absolute",top:"-13px",left:"10px",backgroundColor:"white",zIndex:10,fontSize:"16px",fontWeight:"bold"},".content":{height:"100%",overflowY:"scroll",".loading":{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"},"::-webkit-scrollbar":{backgroundColor:"white",width:"5px"},"::-webkit-scrollbar-thumb":{borderRadius:"5px",backgroundColor:"#d9d9d9"}}}}));return(0,v.jsxs)("div",{className:i,children:[(0,v.jsx)("div",{className:"title",children:"List"}),(0,v.jsx)("div",{className:"content",children:n?(0,v.jsx)("div",{className:"loading",children:(0,v.jsx)(b.Z,{})}):t.length>0?t.map((function(e){return(0,v.jsx)(S,{item:e},e.id)})):(0,v.jsx)(k.Z,{})})]})},N=n(45605),Z=n(87603),D=n(45626),z=n(83863),E=n(15867),Y=n(83062);u().extend(h());var R=Z.Z.RangePicker;function A(e,t){return null===e||null===t?function(){return!0}:function(n){return!n.isBetween(e,t,"day","[]")}}var P=function(e){var t=e.oldestDate,n=e.latestDate,i=e.selectOpts,o=e.notifyFilterCondition,r=(0,g.useState)(""),c=a()(r,2),s=c[0],d=c[1],u=(0,g.useState)([]),p=a()(u,2),h=p[0],f=p[1],x=(0,g.useState)(null),m=a()(x,2),b=m[0],w=m[1],j=(0,g.useState)(null),y=a()(j,2),k=y[0],S=y[1],C=(0,g.useState)(!0),Z=a()(C,2),P=Z[0],I=Z[1],M=(0,l.l)((function(){return{border:"2px dashed #ffccc7",borderRadius:"5px",padding:"5px 3px 2px 3px",position:"relative",display:"flex",height:"95px",flexDirection:"column",justifyContent:"space-between",".title":{position:"absolute",top:"-13px",left:"10px",backgroundColor:"white",zIndex:10,fontSize:"16px",fontWeight:"bold"},".finput":{},".fselect":{width:"100%",".ant-select-selector":{height:"26px"},".ant-select-selection-item":{height:"18px"}},".timectl":{display:"flex",flexDirection:"row",alignItems:"center",".frangepicker":{width:"270px",marginRight:"5px"},".orderswich":{width:"45px"}}}}));return(0,g.useEffect)((function(){null!==t&&null!==n&&(w(t),S(n))}),[t,n]),(0,g.useEffect)((function(){o({keyword:s,selectedtag:h,begin:b,end:k,timeorder:P})}),[s,h,b,k,P]),(0,v.jsxs)("div",{className:M,children:[(0,v.jsx)("div",{className:"title",children:"Search"}),(0,v.jsx)(D.Z,{className:"finput",placeholder:"关键字过滤",size:"small",value:s,onChange:function(e){d(e.target.value)}}),(0,v.jsx)(z.Z,{mode:"multiple",className:"fselect",options:i,placeholder:"标签过滤",allowClear:!0,size:"small",maxTagCount:"responsive",value:h,onChange:function(e){f(e)}}),(0,v.jsxs)("div",{className:"timectl",children:[(0,v.jsx)(R,{className:"frangepicker",size:"small",value:[b,k],allowClear:!1,onChange:function(e){var t=e,n=a()(t,2),i=n[0],o=n[1];w(i),S(o)},disabledDate:A(t,n),disabled:!0}),(0,v.jsx)(E.ZP,{className:"orderswich",size:"small",type:P?"default":"primary",onClick:function(){I(!P)},children:P?"desc":"asc"}),(0,v.jsx)("div",{style:{color:"#bfbfbf",marginLeft:"4px"},children:(0,v.jsx)(Y.Z,{title:"排序规则: desc(降序), asc(升序)",children:(0,v.jsx)(N.Z,{})})})]})]})},I=n(48764).lW;u().extend(h());var M=function(){var e=new x.vd({}),t=(0,g.useState)(!1),n=a()(t,2),i=n[0],o=n[1],d=(0,g.useState)([]),p=a()(d,2),h=p[0],m=p[1],b=(0,g.useState)(!1),w=a()(b,2),y=w[0],k=w[1],S=(0,g.useState)(null),N=a()(S,2),Z=N[0],D=N[1],z=(0,g.useState)(null),E=a()(z,2),Y=E[0],R=E[1],A=(0,g.useState)([]),M=a()(A,2),T=M[0],W=M[1],B=(0,g.useState)({}),L=a()(B,2),O=L[0],_=L[1],H=(0,g.useState)([]),$=a()(H,2),q=$[0],F=$[1],G=(0,g.useState)(""),J=a()(G,2),K=J[0],Q=J[1],U=(0,g.useState)(!1),V=a()(U,2),X=V[0],ee=V[1],te=(0,g.useState)(void 0),ne=a()(te,2),ie=ne[0],ae=ne[1],oe=(0,c.useModel)("demo.layout.blogs.model",(function(e){return{accatalog:e.accatalog,setAccatalog:e.udAccatalog}})),re=oe.accatalog,le=oe.setAccatalog,ce=(0,l.l)((function(){return{display:"flex",flexDirection:"row",height:"calc(100vh - 36px)",width:"100vw",backgroundColor:"#f0f0f0",padding:"5px 3px 2px 0",".navpart":{backgroundColor:"white",height:"100%",width:i?0:"".concat(350,"px"),marginRight:"35px",position:"relative",".navbtn":{position:"absolute",width:"22px",height:"52px",top:"20px",right:"-22px",borderRadius:"0 10px 10px 0",cursor:"pointer",display:"flex",justifyContent:"center",alignItems:"center",fontSize:"20px",backgroundRepeat:"no-repeat",backgroundPosition:"0% 85%",background:"url(".concat(window.location.origin,"/nav/").concat(i?"closed_btn":"opened_btn",".png) 0 0/100% 100% no-repeat;")},".navcontent":{height:"calc(100% - 17px)",width:"100%",padding:"15px 5px 2px 5px",display:i?"none":""}},".main":{flex:"1 1 auto",height:"100%",width:"100%",backgroundColor:"white",marginRight:"5px",padding:"10px 5px 3px 5px"}}}));return(0,g.useEffect)((function(){k(!0),e.request("GET /repos/{owner}/{repo}/contents/{path}",{owner:"duganlx",repo:"datahub",path:"blogs/catalog.json"}).then((function(e){if(200===e.status){var t,n,i=e.data.content||"",o=I.from(i,"base64").toString(),l=function(e){var t={};e.forEach((function(e){void 0===t[e.createTime]&&(t[e.createTime]=[]),t[e.createTime].push(e)}));var n=Object.keys(t).sort((function(e,t){return u()(e,"YYYY-MM-DD").unix()-u()(t,"YYYY-MM-DD").unix()})),i=[];return n.forEach((function(e){var n=t[e];i.push.apply(i,r()(n))})),i}(JSON.parse(o)),c=function(e){for(var t=u()("1999-01-02"),n=u()(),i=0;i<e.length;i++){var a=u()(e[i].createTime,"YYYY-MM-DD");t.isBefore(a)&&(t=a),n.isAfter(a)&&(n=a)}return[n,t]}(l),d=a()(c,2),p=d[0],h=d[1],f=(t=l,n=new Set,t.forEach((function(e){e.tags.forEach((function(e){n.add(e)}))})),Array.from(n).map((function(e){return{value:e}})));if(W(f),D(p),R(h),m(l),l.length>0){var x=l.length-1;le(l[x])}}else s.ZP.info("获取目录数据失败")})).catch((function(e){console.log(e)})).finally((function(){k(!1)}))}),[]),(0,g.useEffect)((function(){var e=(0,f.debounce)((function(e,t){ae({height:e,width:t})}),300);window.addEventListener("resize",(function(){e(window.innerHeight-40,window.innerWidth)})),ae({height:window.innerHeight-40,width:window.innerWidth})}),[]),(0,g.useEffect)((function(){var e=r()(h);""!==O.keyword&&(e=e.filter((function(e){return-1!==e.title.indexOf(O.keyword)}))),0!==(O.selectedtag||[]).length&&(e=e.filter((function(e){for(var t=e.tags,n=!1,i=0;i<O.selectedtag.length;i++){var a=O.selectedtag[i];if(-1!==t.indexOf(a)){n=!0;break}}return n}))),O.timeorder&&(e=e.reverse()),F(e)}),[O]),(0,g.useEffect)((function(){if(null!==re){ee(!0);var t=re.dir;e.request("GET /repos/{owner}/{repo}/contents/{path}",{owner:"duganlx",repo:"datahub",path:"blogs/".concat(t,"/README.md")}).then((function(e){if(200===e.status){var t=e.data.content||"",n=function(e,t){var n="https://github.com/duganlx/datahub/blob/main/blogs/"+t.dir;return e.replace(/!\[(.*?)\]\((.*?)\)/g,"![$1](".concat(n,"/$2?raw=true)"))}(I.from(t,"base64").toString(),re);console.log(n),Q(n)}else s.ZP.info("获取文章数据失败")})).finally((function(){ee(!1)}))}}),[re]),(0,v.jsxs)("div",{className:ce,children:[(0,v.jsxs)("div",{className:"navpart",children:[(0,v.jsx)("div",{className:"navbtn",onClick:function(){o(!i)}}),(0,v.jsxs)("div",{className:"navcontent",children:[(0,v.jsx)(C,{blogItems:q,loading:y}),(0,v.jsx)("div",{style:{width:"100%",height:"15px"}}),(0,v.jsx)(P,{oldestDate:Z,latestDate:Y,selectOpts:T,notifyFilterCondition:function(e){_(e)}})]})]}),(0,v.jsx)("div",{className:"main",children:(0,v.jsx)(j,{loadingcontent:X,content:K,navstate:i,contentlayout:ie,navpartWidth:350})})]})}},5696:function(){}}]);