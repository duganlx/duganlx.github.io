(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[50],{96333:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return K}});var i=n(5574),a=n.n(i),o=n(19632),r=n.n(o),l=n(24556),c=n(80854),s=n(2453),d=n(27484),u=n.n(d),p=n(96486),f=n(22762),h=n(67294),g=n(97857),x=n.n(g),m=n(13769),b=n.n(m),v=n(20640),w=n.n(v),j=n(97956),y=n(42481),k=n(35182),S=n(74707),C=n(93416),N=n(44989),Z=n(30399),D=n(15867),z=(n(81897),n(85893)),E=["inline","className","children"],I=function(e){var t=e.content,n=e.layoutCfg,i=n.height,a=n.width,o=(0,l.l)((function(){return{height:"".concat(i,"px"),width:"".concat(a,"px"),fontSize:"16px",h1:{fontSize:"28px","&:before":{content:'" "',display:"inline-block",height:"32px",width:"5px",marginRight:"5px",backgroundColor:"#0050b3",verticalAlign:"text-bottom"}},h2:{fontSize:"24px"},h3:{fontSize:"20px"},"h4,h5,h6":{textDecoration:"line-through"},p:{marginBottom:"8px"},blockquote:{color:"#999",borderLeft:"3px solid #dfe2e5",padding:"3px 0 1px 10px"},ul:{listStyle:"disc"},ol:{listStyle:"decimal"},"ul.contains-task-list":{listStyle:"none",paddingInlineStart:"30px"},table:{margin:"10px 0",tr:{"td,th":{border:"1px solid rgb(34, 17, 71)",padding:"5px 10px",textAlign:"center"}}},".katex-mathml":{display:"none"}}})),r=(0,l.l)((function(){return{padding:"10px",backgroundColor:"#fff",position:"relative",width:"".concat(a-10,"px"),"&:hover":{button:{display:"block"}},button:{position:"absolute",top:"10px",right:"30px",backgroundColor:"#bfbfbf",display:"none"}}}));return(0,z.jsx)(j.D,{remarkPlugins:[N.Z,Z.Z,C.Z],rehypePlugins:[S.Z],className:o,components:{code:function(e){var t=e.inline,n=e.className,i=e.children,a=b()(e,E),o=/language-(\w+)/.exec(n||"");return!t&&o?(0,z.jsxs)("div",{className:r,children:[(0,z.jsx)(y.Z,x()(x()({},a),{},{style:k.Z,language:o[1],PreTag:"div",wrapLines:!0,showLineNumbers:!1,children:String(i).replace(/\n$/,"")})),(0,z.jsx)(D.ZP,{type:"primary",size:"small",onClick:function(){w()(String(i).replace(/\n$/,""))?s.ZP.success("复制成功"):s.ZP.error("复制失败")},children:"copy"})]}):(0,z.jsx)("code",x()(x()({},a),{},{className:n,children:i}))}},children:t})},R=n(75081),Y={height:100,width:100},P=function(e){var t=e.loadingcontent,n=e.content,i=e.navstate,o=e.contentlayout,r=void 0===o?Y:o,c=e.navpartWidth,s=(0,h.useState)(Y),d=a()(s,2),u=d[0],p=d[1],f=(0,h.useState)(Y),g=a()(f,2),x=g[0],m=g[1],b=(0,h.useRef)(null);(0,h.useEffect)((function(){p({width:r.width-50,height:r.height-20}),m({width:r.width-c-50,height:r.height-20})}),[i,r]);var v=(0,l.l)((function(){return{width:"100%",height:"100%",".loading":{width:"100%",height:"100%",display:t?"flex":"none",justifyContent:"center",alignItems:"center"},".content":{height:"100%",width:"100%",overflowY:"auto",display:t?"none":"","::-webkit-scrollbar":{backgroundColor:"white",width:"5px"},"::-webkit-scrollbar-thumb":{borderRadius:"5px",backgroundColor:"#d9d9d9"}}}}));return console.log("s",x,"b",u),(0,z.jsxs)("div",{className:v,ref:b,children:[(0,z.jsx)("div",{className:"loading",children:(0,z.jsx)(R.Z,{})}),(0,z.jsx)("div",{className:"content",children:t?null:(0,z.jsx)(I,{content:n,layoutCfg:i?u:x})})]})},A=n(66309),M=n(32983),T=function(e){var t=e.item,n=t.title,i=t.tags,a=t.updateTime,o=(0,c.useModel)("travelogue.blogs.model",(function(e){return{accatalog:e.accatalog,setAccatalog:e.udAccatalog}})),r=o.accatalog,s=o.setAccatalog,d=(0,l.l)((function(){return{borderBottom:"1px solid #d9d9d9",padding:"5px 2px 1px 5px",cursor:"pointer",backgroundColor:r&&r.id===t.id?"#f9f0ff":"white","&:hover":{backgroundColor:"#fafafa"},".acard-title":{color:"black",marginBottom:"5px",fontSize:"15px",wordSpacing:"1px"},".acard-info":{display:"flex",flexDirection:"row",width:"100%",justifyContent:"space-between",paddingBottom:"2px",alignItems:"center",".acardinfo-tags":{".ant-tag ":{height:"18px",lineHeight:"14px"}},".acardinfo-time":{lineHeight:"14px",fontSize:"13px",minWidth:"70px",color:"#8c8c8c"}}}}));return(0,z.jsxs)("div",{className:d,onClick:function(){s(t)},children:[(0,z.jsx)("div",{className:"acard-title",children:n}),(0,z.jsxs)("div",{className:"acard-info",children:[(0,z.jsx)("div",{className:"acardinfo-tags",children:i.map((function(e){return(0,z.jsx)(A.Z,{color:"orange",children:e},e)}))}),(0,z.jsx)("div",{className:"acardinfo-time",children:a})]})]})},L=function(e){var t=e.blogItems,n=e.loading,i=(0,l.l)((function(){return{border:"2px dashed #ffccc7",borderRadius:"5px",padding:"5px 3px 2px 3px",position:"relative",display:"flex",height:"calc(100% - 95px)",flexDirection:"column",justifyContent:"space-between",".title":{position:"absolute",top:"-13px",left:"10px",backgroundColor:"white",zIndex:10,fontSize:"16px",fontWeight:"bold",fontFamily:'"Trebuchet MS", Helvetica, sans-serif'},".content":{height:"100%",overflowY:"scroll",".loading":{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"},"::-webkit-scrollbar":{backgroundColor:"white",width:"5px"},"::-webkit-scrollbar-thumb":{borderRadius:"5px",backgroundColor:"#d9d9d9"}}}}));return(0,z.jsxs)("div",{className:i,children:[(0,z.jsx)("div",{className:"title",children:"List"}),(0,z.jsx)("div",{className:"content",children:n?(0,z.jsx)("div",{className:"loading",children:(0,z.jsx)(R.Z,{})}):t.length>0?t.map((function(e){return(0,z.jsx)(T,{item:e},e.id)})):(0,z.jsx)(M.Z,{})})]})},W=n(45605),O=n(87603),B=n(45626),H=n(83863),_=n(83062),F=n(66607),$=n.n(F);u().extend($());var q=O.Z.RangePicker;function G(e,t){return null===e||null===t?function(){return!0}:function(n){return!n.isBetween(e,t,"day","[]")}}var U=function(e){var t=e.oldestDate,n=e.latestDate,i=e.selectOpts,o=e.notifyFilterCondition,r=(0,h.useState)(""),c=a()(r,2),s=c[0],d=c[1],u=(0,h.useState)([]),p=a()(u,2),f=p[0],g=p[1],x=(0,h.useState)(null),m=a()(x,2),b=m[0],v=m[1],w=(0,h.useState)(null),j=a()(w,2),y=j[0],k=j[1],S=(0,h.useState)(!0),C=a()(S,2),N=C[0],Z=C[1],E=(0,l.l)((function(){return{border:"2px dashed #ffccc7",borderRadius:"5px",padding:"5px 3px 2px 3px",position:"relative",display:"flex",height:"95px",flexDirection:"column",justifyContent:"space-between",".title":{position:"absolute",top:"-13px",left:"10px",backgroundColor:"white",zIndex:10,fontSize:"16px",fontWeight:"bold",fontFamily:'"Trebuchet MS", Helvetica, sans-serif'},".finput":{},".fselect":{width:"100%",".ant-select-selector":{height:"26px"},".ant-select-selection-item":{height:"18px"}},".timectl":{display:"flex",flexDirection:"row",alignItems:"center",".frangepicker":{width:"270px",marginRight:"5px"},".orderswich":{width:"45px"}}}}));return(0,h.useEffect)((function(){null!==t&&null!==n&&(v(t),k(n))}),[t,n]),(0,h.useEffect)((function(){o({keyword:s,selectedtag:f,begin:b,end:y,timeorder:N})}),[s,f,b,y,N]),(0,z.jsxs)("div",{className:E,children:[(0,z.jsx)("div",{className:"title",children:"Search"}),(0,z.jsx)(B.Z,{className:"finput",placeholder:"关键字过滤",size:"small",value:s,onChange:function(e){d(e.target.value)}}),(0,z.jsx)(H.Z,{mode:"multiple",className:"fselect",options:i,placeholder:"标签过滤",allowClear:!0,size:"small",maxTagCount:"responsive",value:f,onChange:function(e){g(e)}}),(0,z.jsxs)("div",{className:"timectl",children:[(0,z.jsx)(q,{className:"frangepicker",size:"small",value:[b,y],allowClear:!1,onChange:function(e){var t=e,n=a()(t,2),i=n[0],o=n[1];v(i),k(o)},disabledDate:G(t,n),disabled:!0}),(0,z.jsx)(D.ZP,{className:"orderswich",size:"small",type:N?"default":"primary",onClick:function(){Z(!N)},children:N?"desc":"asc"}),(0,z.jsx)("div",{style:{color:"#bfbfbf",marginLeft:"4px"},children:(0,z.jsx)(_.Z,{title:"排序规则: desc(降序), asc(升序)",children:(0,z.jsx)(W.Z,{})})})]})]})},J=n(48764).lW;var K=function(){var e=new f.vd({}),t=(0,h.useState)(!1),n=a()(t,2),i=n[0],o=n[1],d=(0,h.useState)([]),g=a()(d,2),x=g[0],m=g[1],b=(0,h.useState)(!1),v=a()(b,2),w=v[0],j=v[1],y=(0,h.useState)(null),k=a()(y,2),S=k[0],C=k[1],N=(0,h.useState)(null),Z=a()(N,2),D=Z[0],E=Z[1],I=(0,h.useState)([]),R=a()(I,2),Y=R[0],A=R[1],M=(0,h.useState)({}),T=a()(M,2),W=T[0],O=T[1],B=(0,h.useState)([]),H=a()(B,2),_=H[0],F=H[1],$=(0,h.useState)(""),q=a()($,2),G=q[0],K=q[1],Q=(0,h.useState)(!1),V=a()(Q,2),X=V[0],ee=V[1],te=(0,h.useState)(void 0),ne=a()(te,2),ie=ne[0],ae=ne[1],oe=function(e){var t={};return 1===e.split("?").length||e.split("?")[1].split("&").forEach((function(e){var n=e.split("="),i=a()(n,2),o=i[0],r=i[1];-1===r.indexOf(",")?t[o]=decodeURIComponent(r):t[o]=r.split(",").map((function(e){return decodeURIComponent(e)}))})),t}((0,c.useLocation)().search),re=(0,c.useModel)("travelogue.blogs.model",(function(e){return{accatalog:e.accatalog,setAccatalog:e.udAccatalog}})),le=re.accatalog,ce=re.setAccatalog,se=(0,l.l)((function(){return{display:"flex",flexDirection:"row",height:"calc(100vh - 36px)",width:"100vw",backgroundColor:"#f0f0f0",padding:"5px 3px 2px 0",".navpart":{backgroundColor:"white",height:"100%",width:i?0:"".concat(350,"px"),marginRight:"35px",position:"relative",".navbtn":{position:"absolute",width:"22px",height:"52px",top:"20px",right:"-22px",borderRadius:"0 10px 10px 0",cursor:"pointer",display:"flex",justifyContent:"center",alignItems:"center",fontSize:"20px",backgroundRepeat:"no-repeat",backgroundPosition:"0% 85%",background:"url(".concat(window.location.origin,"/nav/").concat(i?"closed_btn":"opened_btn",".png) 0 0/100% 100% no-repeat;")},".navcontent":{height:"calc(100% - 17px)",width:"100%",padding:"15px 5px 2px 5px",display:i?"none":""}},".main":{flex:"1 1 auto",height:"100%",width:"100%",backgroundColor:"white",marginRight:"5px",padding:"10px 5px 3px 5px"}}}));return(0,h.useEffect)((function(){j(!0),e.request("GET /repos/{owner}/{repo}/contents/{path}",{owner:"duganlx",repo:"datahub",path:"blogs/catalog.json"}).then((function(e){if(200===e.status){var t,n,i=e.data.content||"",o=J.from(i,"base64").toString(),l=function(e){var t={};e.forEach((function(e){void 0===t[e.updateTime]&&(t[e.updateTime]=[]),t[e.updateTime].push(e)}));var n=Object.keys(t).sort((function(e,t){return u()(e,"YYYY-MM-DD").unix()-u()(t,"YYYY-MM-DD").unix()})),i=[];return n.forEach((function(e){var n=t[e];i.push.apply(i,r()(n))})),i}(JSON.parse(o)),c=function(e){for(var t=u()("1999-01-02"),n=u()(),i=0;i<e.length;i++){var a=u()(e[i].updateTime,"YYYY-MM-DD");t.isBefore(a)&&(t=a),n.isAfter(a)&&(n=a)}return[n,t]}(l),d=a()(c,2),p=d[0],f=d[1],h=(t=l,n=new Set,t.forEach((function(e){e.tags.forEach((function(e){n.add(e)}))})),Array.from(n).map((function(e){return{value:e}})));if(A(h),C(p),E(f),m(l),void 0!==oe.blogId){var g=l.filter((function(e){return e.id===+oe.blogId}));if(g.length>0)return void ce(g[0]);s.ZP.info("blog[id=".concat(oe.blogId,"] is not exist."))}if(l.length>0){var x=l.length-1;ce(l[x])}}else s.ZP.info("获取目录数据失败")})).catch((function(e){console.log(e)})).finally((function(){j(!1)}))}),[]),(0,h.useEffect)((function(){var e=(0,p.debounce)((function(e,t){ae({height:e,width:t})}),300);window.addEventListener("resize",(function(){e(window.innerHeight-40,window.innerWidth)})),ae({height:window.innerHeight-40,width:window.innerWidth})}),[]),(0,h.useEffect)((function(){var e=r()(x);""!==W.keyword&&(e=e.filter((function(e){return-1!==e.title.toLowerCase().indexOf(W.keyword.toLowerCase())}))),0!==(W.selectedtag||[]).length&&(e=e.filter((function(e){for(var t=e.tags,n=!1,i=0;i<W.selectedtag.length;i++){var a=W.selectedtag[i];if(-1!==t.indexOf(a)){n=!0;break}}return n}))),W.timeorder&&(e=e.reverse()),F(e)}),[W]),(0,h.useEffect)((function(){if(null!==le){ee(!0);var t=le.dir;e.request("GET /repos/{owner}/{repo}/contents/{path}",{owner:"duganlx",repo:"datahub",path:"blogs/".concat(t,"/README.md")}).then((function(e){if(200===e.status){var t=e.data.content||"",n=function(e,t){var n="https://github.com/duganlx/datahub/blob/main/blogs/"+t.dir;return e.replace(/!\[(.*?)\]\((.*?)\)/g,"![$1](".concat(n,"/$2?raw=true)"))}(J.from(t,"base64").toString(),le);K(n)}else s.ZP.info("获取文章数据失败")})).finally((function(){ee(!1)}))}}),[le]),(0,z.jsxs)("div",{className:se,children:[(0,z.jsxs)("div",{className:"navpart",children:[(0,z.jsx)("div",{className:"navbtn",onClick:function(){o(!i)}}),(0,z.jsxs)("div",{className:"navcontent",children:[(0,z.jsx)(L,{blogItems:_,loading:w}),(0,z.jsx)("div",{style:{width:"100%",height:"15px"}}),(0,z.jsx)(U,{oldestDate:S,latestDate:D,selectOpts:Y,notifyFilterCondition:function(e){O(e)}})]})]}),(0,z.jsx)("div",{className:"main",children:(0,z.jsx)(P,{loadingcontent:X,content:G,navstate:i,contentlayout:ie,navpartWidth:350})})]})}},5696:function(){}}]);